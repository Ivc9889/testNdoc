@{
	Layout = "~/Views/Shared/Admin_Layout.cshtml";
}
@using testNdoc.Models
@model Documents
@{
	ViewBag.Title = "Редактирование документа";
}
<form>
	<input type="hidden" id="DocId" value="@Model.Id" />
	<div class="form-group">
		<label for="DocName" class="control-label">Название</label>
		<input type="text" id="DocName" class="form-control" value="@Model.Name" />
	</div>
	<div class="form-group">
		<div class="custom-file">
			<input type="file" id="fileUpload" class="fileUpload">
			<button id="btnUpload" type="submit" onclick="EditDocument()" class="btn  btn-success">Загрузить</button>
		</div>
	</div>
</form>

@section Scripts
{
    <script>
		function EditDocument() {        
            var files = $('#fileUpload').prop("files");
            var url = "/Admin/EditDocument";
            formData = new FormData();
            formData.append("Id", $("#DocId").val());
            formData.append("Name", $("#DocName").val());
            formData.append("MyUploader", files[0]);

            jQuery.ajax({
                type: 'POST',
                url: url,
                data: formData,
                processData: false,
                contentType: false,
                beforeSend: function (xhr) {                    
                    xhr.setRequestHeader("XSRF-TOKEN",
                        $('input:hidden[name="__RequestVerificationToken"]').val());
                }
				
            });
        } 
    </script>
}